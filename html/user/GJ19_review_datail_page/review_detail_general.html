<!--
 @filename    : inquiry_detail.html
 @author      : 한송희 (onee.ssong@gmail.com)
 @description : Grandjeju 1:1 문의 상세 페이지(답변 전)의 구조 구현
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrandJeju - 문의 내역</title>

    <link rel="stylesheet" href="../assets/css/all.css">
    <link rel="stylesheet" href="../assets/css/header_style.css">
    <link rel="stylesheet" type="text/css" href="./assets/css/style_review_detail.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&family=Rubik&display=swap" rel="stylesheet">
</head>

<body>
    <div id="wrap">
        <!-- HEADER -->
        <div id="header">
            <h2 class="title">REVIEW</h2>
        </div>
        <!-- CONTAINER -->
        <div id="container">
            <!-- CONTENT -->
            <div id="content">
                <!-- 제목 항목 -->
                <div class="title_group">
                    <span class="review_title"></span>
                </div>
                <!-- 작성자 및 작성 날짜 항목 -->
                <div class="writer_group">
                    <span class="user_name"></span>
                    <span class="review_date"></span>
                </div>
                <!-- 본문 항목 -->
                <div class="main_group">
                    <div class="ask_group">
                        <p class="text"></p>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <script src='https://unpkg.com/sweetalert/dist/sweetalert.min.js'></script>
    <script src="./assets/js/cancel_alert.js"></script>

    <!-- Fake API 리뷰 내역 출력 -->
    <script>
        function get_review(review_id) {
            const xhr = new XMLHttpRequest();
            const method = 'GET';
            const url = "http://localhost:3000/review/" + review_id;

            xhr.onreadystatechange = (e) => {
                const { target } = e;

                if (target.readyState == XMLHttpRequest.DONE) {
                    if (target.status == 200) {
                        const req = JSON.parse(target.response);
                        document.querySelector('.review_title').innerHTML = req.title;
                        document.querySelector('.user_name').innerHTML = req.user_name;
                        document.querySelector('.review_date').innerHTML = req.review_date;
                        document.querySelector('.text').innerHTML = req.text;
                    } else {
                        const s = parseInt(target.status / 100);
                        let errMsg = null;

                        if (s == 4) {
                            errMsg = '[' + target.status + ']' + target.statusText + '- 요청 주소가 잘못되었습니다.';
                        } else if (s == 5) {
                            errMsg = '[' + target.status + ']' + target.statusText + '- 서버의 응답이 없습니다.';
                        } else {
                            errMsg = '[' + target.status + ']' + target.statusText + '- 요청에 실패하였습니다.';
                        }
                        alert(errMsg);
                    }
                }
            };

            xhr.open(method, url);
            xhr.send();
        }

        (() => {
            get_review(90001);
        })();

    </script>
</body>
</html>