<!--
 @filename    : inquiry_detail.html
 @author      : 한송희 (onee.ssong@gmail.com)
 @description : Grandjeju 1:1 문의 상세 페이지(답변 전)의 구조 구현
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrandJeju - 문의 내역</title>

    <link rel="stylesheet" href="../assets/css/all.css">
    <link rel="stylesheet" href="../assets/css/header_style.css">
    <link rel="stylesheet" type="text/css" href="./assets/css/style_inquiry_detail.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&family=Rubik&display=swap" rel="stylesheet">
</head>

<body>
    <div id="wrap">
        <!-- HEADER -->
        <div id="header">
            <h2 class="title">1:1 문의</h2>
        </div>
        <!-- CONTAINER -->
        <div id="container">
            <!-- CONTENT -->
            <div id="content">
                <!-- 제목 항목 -->
                <div class="title_group">
                    <span class="type"></span>
                    <span class="title_title"></span>
                </div>
                <!-- 작성자 및 작성 날짜 항목 -->
                <div class="writer_group">
                    <span class="user_name"></span>
                    <span class="inquiry_date"></span>
                </div>
                <!-- 본문 항목 -->
                <div class="main_group">
                    <div class="ask_group">
                        <p class="inquiry_text">
                    </div>
                    <div class="answer_group">
                        <p class="answer_text">
                    </div>
                </div>

                <!-- 버튼 -->
                <div class="btn_group">
                    <button class="btn_modify" type="button">수정</button>
                    <button class="btn_delete" type="button">삭제</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src='https://unpkg.com/sweetalert/dist/sweetalert.min.js'></script>
    <script src="./assets/js/cancel_alert.js"></script>

    <script>
        (async () => {
            // GET 파라미터 받기
            const params = new URLSearchParams(window.location.search);
            const inquiry_id = params.get('inquiry_id');

            const type = document.querySelector(".type")
            const title = document.querySelector(".title_title")
            const inquiry_date = document.querySelector(".inquiry_date")
            const inquiry_text = document.querySelector(".inquiry_text")
            const answer_text = document.querySelector(".answer_text")

            let json = null;
            try {
                const response = await axios.get('/inquiry/' + inquiry_id)
                json = response.data
            }catch (e) {
                alert(e.response.data.rtmsg);
                return;
            }
            if(json != null) {
                console.log(json);
                title.innerHTML = json.item[0].title;
                type.innerHTML = json.item[0].type
                inquiry_date.innerHTML = json.item[0].inquiry_date
                inquiry_text.innerHTML = json.item[0].inquiry_text
                answer_text.innerHTML = json.item[0].answer_text
            }
        })();
    </script>


    <!-- 수정 버튼 클릭 시, 수정 페이지 이동 -->
    <script type="text/javascript">
        document.querySelector('.btn_modify').addEventListener("click", e => {
            e.preventDefault();

            // GET 파라미터 받기
            const params = new URLSearchParams(window.location.search);
            const inquiry_id = params.get('inquiry_id');

            // 수정 페이지로 이동
            location.href="/GJ10_inquiry_modify_page/inquiry_modify.html?inquiry_id=" + inquiry_id;
        });
    </script>
</body>
</html>